<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta http-equiv="refresh"
    content="5; URL=\'/fr/fr/hypnotic-vanilla---patchouli-extrait-de-parfum-50ml--1-7-fl--oz---p20110795.html?bm-verify=AAQAAAAL_____5Unb8B5TgEmhIg3RK3ILv9QxXMzBSJJQHXks8LdRV38soIfeXsE9yPgwq8yB015x3v1GkYhevSHGxPK_1fNEZc29IykmeN_7nwCWLSjTCTT9RlwayB34XUkSESwGuhLTV8ZP8BPGbhRLpd3h1cZdsQkXLOMas6D6sdzIkoAcUk74EsuqkaQaKCJu8XaYZQm_exv-BkDIXPTa19jieafnU8aiVSTXsO3VBWf42scPkzA-Xb1zwbPX5ZyAbEazEtowxWV2p6TNLisaJTUl5c7ago_SsVAgY7Muhb_LUElwHguzflXnZ_spJGAMfEwHDMirYUDD10uACLlJTlBS6SxUCOY3ze5GBA\'" />
  <title>&nbsp;</title>
  <script> var i = 1747306697; var j = i + Number("9476" + "82473"); </script>
</head> <noscript> <iframe style="border: none; height: 100%; width: 100%;" src=""></iframe></noscript>
<script> var xhr = new XMLHttpRequest(); xhr.withCredentials = true; xhr.addEventListener("loadend", function () { try { var data = JSON.parse(xhr.responseText); if (data.hasOwnProperty('reload')) { if (data["reload"] == true) { window.location.replace(window.location.href.replace(/[&?]bm-verify=[^#]*/, "")); if (window.location.hash) { window.location.reload(); } } } else if (data.hasOwnProperty('location')) { window.location.replace(data["location"]); } else { window.location.reload(); } } catch (e) { var data = {}; window.location.reload(); } }); xhr.open("POST", "/_sec/verify?provider=interstitial", false); xhr.setRequestHeader("Content-Type", "application/json"); xhr.send(JSON.stringify({ "bm-verify": "AAQAAAAL/////yPUGYqtA+HgKo73eYvQF/wfgLsp1a5NqE8PjAl49Pru+2zJVjzs8NPxePYkquB4Q7nXpWDvRNB7YOY1tgaoUEakmqicuCsqXNBovwUNBpwJB1h/+Pzz0y2IHYsRgq0xfnBd8k5xSKdTqqf0spXP+kuhly3zHANGW4eTpEJiIJ2MTaqoTHBzZTqb6CmbVTuG/1hZ7GKQWVCewVos5Mr9CKujA1d90CKwvtXLoT2VaRavfP5UOj/34CDAyy3pbBKq65fXYAxxAYzB7/emmc44Z6phmo8zY8DZUfw9C/0C54oWKV8VWFbxJAMBwXV4iGcL90r4MtG7UkcKakt5TyAWspxJFR9KKFS/Lq5ERMydOX85uPiNW44G", "pow": j })); </script>
</body>

</html>

dh ={
  "Accept": "application/json, text/plain, */*",
  "Accept-Language": "en-US,en;q=0.9",
  "Accept-Encoding": "gzip, deflate, br",
  "Connection": "keep-alive",
  "User-Agent": "PostmanRuntime/7.30.0",
}

from bs4 import BeautifulSoup
import json
def create_variables_from_html(html_content):
    # Parse the HTML
    soup = BeautifulSoup(html_content, 'html.parser')
    # Extract the `bm-verify` value from the meta refresh tag
    meta_refresh = soup.find('meta', {'http-equiv': 'refresh'})
    bm_verify_value = ""
    if meta_refresh and 'content' in meta_refresh.attrs:
        content = meta_refresh['content']
        if "bm-verify=" in content:
            bm_verify_value = content.split("bm-verify=")[-1].split("'")[0]
    # Extract `i` and `j` values from the script
    i = 1747307134
    j = i + int("1289" + "97668")  # Assuming values are static from the script tag
    # Set fixed URL and headers
    url = "https://www.zara.com/_sec/verify?provider=interstitial"
    headers = {"Content-Type": "application/json"}
    # Construct payload
    payload = {
        "bm-verify": bm_verify_value,
        "pow": j
    }
    return i, j, url, headers, payload


a = r.get("https://www.zara.com/fr/fr/hypnotic-vanilla---patchouli-extrait-de-parfum-50ml--1-7-fl--oz---p20110795.html", headers=dh)
i, j, url, h, payload = create_variables_from_html(a.text)


response = requests.post(url, headers=h, data=json.dumps(payload))

